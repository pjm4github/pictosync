@startuml Component Diagram
!theme plain

title PokeAMI â€” Component Diagram

package "API Layer" {
    [FastAPI Application] as API
    [Health Router] as Health
    [Meters Router] as Meters
    [Readings Router] as Readings
    [Usage Points Router] as UP
    [Reading Types Router] as RT
    [Analytics Router] as Analytics
    [Delivery Promises Router] as DP
    [Auth Middleware] as Auth
}

package "Simulator Layer" {
    [SimulatorEngine] as Engine
    [Headend (HES)] as HES
    [MDM (VEE)] as MDM
    [Analytics Engine] as AE
    [Delivery Manager] as DM
    [Meter Park] as MP
    [Data Generator] as DG
}

API --> Auth : validates
API --> Engine : queries

Health --> Engine
Meters --> Engine
Readings --> Engine
UP --> Engine
RT --> Engine
Analytics --> Engine
DP --> Engine

Engine --> HES : raw data
Engine --> MDM : validated data
Engine --> AE : analytics
Engine --> DM : on-demand reads

HES --> MP : meter inventory
HES --> DG : data generation
MDM --> HES : raw readings
AE --> HES : raw readings
DM --> HES : on-demand collection
DM --> MDM : validated reads

MP --> DG : meter specs

@enduml
