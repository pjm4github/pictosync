@startuml Architecture Diagram
!theme plain

title PokeAMI â€” Simulated AMI Architecture

node "Smart Meters" {
    [E350 Residential] as E350
    [E360 Advanced] as E360
    [S4x/E650 C&I] as S4x
    [E660/Revelo IoT] as E660
}

cloud "Communication Network" {
    [RF Mesh] as RF
    [PLC] as PLC
    [Cellular LTE] as LTE
}

node "Gridstream HES\n(Head-End System)" as HES {
    [Data Collection]
    [Meter Inventory]
}

node "Core MDMS\n(Meter Data Mgmt)" as MDM {
    [Validation]
    [Estimation]
    [Editing]
}

node "Gridstream Analytics" as GA {
    [Demand Analysis]
    [Voltage Monitoring]
    [Revenue Protection]
}

node "Delivery Manager\n(On-Demand Reads)" as DM {
    [Promise Tracking]
    [Comm Latency Simulation]
}

node "REST API\n(FastAPI + OpenAPI 3.1)" as API {
    [/meters]
    [/readings]
    [/usage-points]
    [/analytics]
    [/delivery-promises]
}

actor "Client Applications" as Client

E350 --> RF
E360 --> LTE
S4x --> LTE
E660 --> LTE
E350 --> PLC

RF --> HES
PLC --> HES
LTE --> HES

HES --> MDM : raw readings
MDM --> GA : validated data
HES --> GA : raw data

HES --> API
MDM --> API
GA --> API
DM --> API

HES --> DM : on-demand collection
MDM --> DM : validated reads

Client --> API : HTTP + X-API-Key

@enduml
